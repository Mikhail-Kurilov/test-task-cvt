{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"D:/test/vs_studio/dr-pill/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/test/vs_studio/dr-pill/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/test/vs_studio/dr-pill/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/test/vs_studio/dr-pill/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Redirect}from'react-router-dom';import history from'../../history';import'./Game.css';import GameDrPill from'./GameDrPill';var Game=/*#__PURE__*/function(_React$Component){_inherits(Game,_React$Component);var _super=_createSuper(Game);function Game(props){var _this;_classCallCheck(this,Game);_this=_super.call(this,props);_this.game=null;_this.state={sec:60,score:0,points:0,maxPoints:20,audioPic:'/icons8-mute-50.png'};return _this;}_createClass(Game,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.game=new GameDrPill({id:'canvas',callbacks:{endGame:function endGame(score){_this2.setState({score:score});},timeTick:function timeTick(sec){_this2.setState({sec:sec});},addPills:function addPills(points){if(_this2.state.points+points>=_this2.state.maxPoints){_this2.setState({points:0,maxPoints:_this2.state.maxPoints+10,score:_this2.state.score+1,sec:60});_this2.game.restartTime();}else{_this2.setState({points:_this2.state.points+points});}}}});var soundArr=['/audio/game1.mp3','/audio/game2.mp3'];document.getElementById('audio').src=soundArr[Math.floor(Math.random(soundArr.length)+0.5)];}},{key:\"playPauseAudioHandler\",value:function playPauseAudioHandler(){var audio=document.getElementById('audio');if(audio.paused){audio.play();this.setState({audioPic:'/icons8-mute-50.png'});}else{audio.pause();this.setState({audioPic:'/icons8-sound-50.png'});}}//audio.src = './assets/' + this.cards[this.variants[this.variants.length - 1]].audioSrc;\n},{key:\"render\",value:function render(){var _this3=this;if(this.state.sec<=1){return/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/result',state:{score:this.state.score}}});}return/*#__PURE__*/_jsxs(\"div\",{className:\"Game\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"statistics\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u043A\\u043E\\u043B\\u0431\\u044B: \",this.state.score]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u0432\\u0440\\u0435\\u043C\\u0435\\u0447\\u043A\\u043E: \",this.state.sec]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u043F\\u0438\\u043B\\u044E\\u043B\\u0438: \",this.state.points,\"/\",this.state.maxPoints]}),/*#__PURE__*/_jsx(\"button\",{className:\"glow-on-hover music\",onClick:function onClick(){return _this3.playPauseAudioHandler();},children:/*#__PURE__*/_jsx(\"img\",{src:this.state.audioPic,width:\"30px\",height:\"30px\",className:\"\"})})]}),/*#__PURE__*/_jsx(\"canvas\",{id:\"canvas\"}),/*#__PURE__*/_jsx(\"audio\",{id:\"audio\",autoPlay:true,loop:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"backForward\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"glow-on-hover\",onClick:function onClick(){return history.push('/');},children:\"Home page\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"glow-on-hover\",onClick:function onClick(){return history.push('/result');},children:\"Results\"})]})})]});}}]);return Game;}(React.Component);export default Game;","map":{"version":3,"sources":["D:/test/vs_studio/dr-pill/src/components/Game/Game.js"],"names":["React","Redirect","history","GameDrPill","Game","props","game","state","sec","score","points","maxPoints","audioPic","id","callbacks","endGame","setState","timeTick","addPills","restartTime","soundArr","document","getElementById","src","Math","floor","random","length","audio","paused","play","pause","pathname","playPauseAudioHandler","push","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport history from '../../history';\r\n\r\nimport './Game.css';\r\nimport GameDrPill from './GameDrPill';\r\n\r\nclass Game extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.game = null;\r\n        this.state = { sec: 60, score: 0, points: 0, maxPoints: 20, audioPic: '/icons8-mute-50.png' };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.game = new GameDrPill({ \r\n            id: 'canvas', \r\n            callbacks: {\r\n                endGame: (score) => { \r\n                    this.setState({ score });\r\n                },\r\n                timeTick: (sec) => {\r\n                    this.setState({ sec });\r\n                },\r\n                addPills: (points) => {\r\n                    if (this.state.points + points >= this.state.maxPoints) {\r\n                        this.setState({ \r\n                            points: 0, \r\n                            maxPoints: this.state.maxPoints + 10,\r\n                            score: this.state.score + 1,\r\n                            sec: 60\r\n                        });\r\n                        this.game.restartTime()\r\n                    } else {\r\n                        this.setState({ points: this.state.points + points  });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        const soundArr = [\r\n            '/audio/game1.mp3',\r\n            '/audio/game2.mp3'\r\n        ];\r\n\r\n        document.getElementById('audio').src = soundArr[Math.floor(Math.random(soundArr.length) + 0.5)];\r\n    }\r\n\r\n    playPauseAudioHandler() {\r\n        const audio = document.getElementById('audio');\r\n        if (audio.paused) {\r\n            audio.play();\r\n            this.setState({audioPic:'/icons8-mute-50.png'});\r\n        } else {\r\n            audio.pause();\r\n            this.setState({audioPic:'/icons8-sound-50.png'});\r\n        }\r\n    }\r\n\r\n    //audio.src = './assets/' + this.cards[this.variants[this.variants.length - 1]].audioSrc;\r\n    render() {\r\n        if (this.state.sec <= 1) {\r\n            return <Redirect to={ {\r\n                pathname: '/result',\r\n                state: { score: this.state.score }\r\n            } }\r\n            />\r\n        }\r\n\r\n        return (\r\n            <div className=\"Game\">\r\n                <div className=\"statistics\">\r\n                    <div>колбы: { this.state.score }</div>\r\n                    <div>времечко: { this.state.sec }</div>\r\n                    <div>пилюли: {this.state.points}/{this.state.maxPoints}</div>\r\n                    <button className=\"glow-on-hover music\" onClick={() => this.playPauseAudioHandler()}>\r\n                        <img src={this.state.audioPic} width='30px' height='30px' className=''></img>\r\n                    </button>\r\n                </div>\r\n                <canvas id='canvas'></canvas>\r\n                <audio id='audio' autoPlay loop></audio>\r\n                <br />\r\n                <form>\r\n                    <div className='backForward'>\r\n                    <button className=\"glow-on-hover\" onClick={() => history.push('/')}>Home page</button>\r\n                    <br />\r\n                    <button className=\"glow-on-hover\" onClick={() => history.push('/result')}>Results</button>  \r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Game;\r\n"]},"metadata":{},"sourceType":"module"}